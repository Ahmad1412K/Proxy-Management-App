{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\safra\\\\Desktop\\\\Proxidize Task\\\\proxy-management-app\\\\src\\\\context\\\\ProxiesContext.js\";\nimport React, { createContext, useContext, useState, useEffect, useCallback } from 'react';\nimport axios from 'axios';\nimport { useAuth } from './AuthContext';\nconst ProxiesContext = createContext([]);\nexport const ProxiesProvider = ({\n  children\n}) => {\n  const [proxies, setProxies] = useState([]);\n  const {\n    authToken\n  } = useAuth();\n  const fetchProxies = useCallback(async () => {\n    try {\n      const response = await axios.get('http://localhost:5000/proxy', {\n        headers: {\n          Authorization: `Bearer ${authToken}`\n        }\n      });\n      setProxies(response.data);\n    } catch (error) {\n      console.error(\"Error fetching proxies\", error);\n    }\n  }, [authToken]); // Dependency on authToken\n\n  useEffect(() => {\n    if (authToken) {\n      fetchProxies();\n    }\n  }, [authToken, fetchProxies]); // Now includes fetchProxies\n\n  const addProxy = async (ip, port) => {\n    try {\n      await axios.post('http://localhost:5000/proxy', {\n        ip_address: ip,\n        port: port\n      }, {\n        headers: {\n          Authorization: `Bearer ${authToken}`\n        }\n      });\n      fetchProxies();\n    } catch (error) {\n      console.error(\"Error adding proxy\", error);\n    }\n  };\n  const deleteProxy = async proxyId => {\n    try {\n      await axios.delete(`http://localhost:5000/proxies/${proxyId}`, {\n        headers: {\n          Authorization: `Bearer ${authToken}`\n        }\n      });\n      fetchProxies();\n    } catch (error) {\n      console.error(\"Error deleting proxy\", error);\n    }\n  };\n  return /*#__PURE__*/React.createElement(ProxiesContext.Provider, {\n    value: {\n      proxies,\n      addProxy,\n      deleteProxy\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 9\n    }\n  }, children);\n};\nexport const useProxies = () => useContext(ProxiesContext);","map":{"version":3,"names":["React","createContext","useContext","useState","useEffect","useCallback","axios","useAuth","ProxiesContext","ProxiesProvider","children","proxies","setProxies","authToken","fetchProxies","response","get","headers","Authorization","data","error","console","addProxy","ip","port","post","ip_address","deleteProxy","proxyId","delete","createElement","Provider","value","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","useProxies"],"sources":["C:/Users/safra/Desktop/Proxidize Task/proxy-management-app/src/context/ProxiesContext.js"],"sourcesContent":["import React, { createContext, useContext, useState, useEffect, useCallback } from 'react';\r\nimport axios from 'axios';\r\nimport { useAuth } from './AuthContext';\r\n\r\nconst ProxiesContext = createContext([]);\r\n\r\nexport const ProxiesProvider = ({ children }) => {\r\n    const [proxies, setProxies] = useState([]);\r\n    const { authToken } = useAuth();\r\n\r\n    const fetchProxies = useCallback(async () => {\r\n        try {\r\n            const response = await axios.get('http://localhost:5000/proxy', {\r\n                headers: { Authorization: `Bearer ${authToken}` }\r\n            });\r\n            setProxies(response.data);\r\n        } catch (error) {\r\n            console.error(\"Error fetching proxies\", error);\r\n        }\r\n    }, [authToken]); // Dependency on authToken\r\n\r\n    useEffect(() => {\r\n        if (authToken) {\r\n            fetchProxies();\r\n        }\r\n    }, [authToken, fetchProxies]); // Now includes fetchProxies\r\n\r\n    const addProxy = async (ip, port) => {\r\n        try {\r\n            await axios.post('http://localhost:5000/proxy', { ip_address: ip, port: port }, {\r\n                headers: { Authorization: `Bearer ${authToken}` }\r\n            });\r\n            fetchProxies();\r\n        } catch (error) {\r\n            console.error(\"Error adding proxy\", error);\r\n        }\r\n    };\r\n\r\n    const deleteProxy = async (proxyId) => {\r\n        try {\r\n            await axios.delete(`http://localhost:5000/proxies/${proxyId}`, {\r\n                headers: { Authorization: `Bearer ${authToken}` }\r\n            });\r\n            fetchProxies();\r\n        } catch (error) {\r\n            console.error(\"Error deleting proxy\", error);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <ProxiesContext.Provider value={{ proxies, addProxy, deleteProxy }}>\r\n            {children}\r\n        </ProxiesContext.Provider>\r\n    );\r\n};\r\n\r\nexport const useProxies = () => useContext(ProxiesContext);\r\n"],"mappings":";AAAA,OAAOA,KAAK,IAAIC,aAAa,EAAEC,UAAU,EAAEC,QAAQ,EAAEC,SAAS,EAAEC,WAAW,QAAQ,OAAO;AAC1F,OAAOC,KAAK,MAAM,OAAO;AACzB,SAASC,OAAO,QAAQ,eAAe;AAEvC,MAAMC,cAAc,GAAGP,aAAa,CAAC,EAAE,CAAC;AAExC,OAAO,MAAMQ,eAAe,GAAGA,CAAC;EAAEC;AAAS,CAAC,KAAK;EAC7C,MAAM,CAACC,OAAO,EAAEC,UAAU,CAAC,GAAGT,QAAQ,CAAC,EAAE,CAAC;EAC1C,MAAM;IAAEU;EAAU,CAAC,GAAGN,OAAO,CAAC,CAAC;EAE/B,MAAMO,YAAY,GAAGT,WAAW,CAAC,YAAY;IACzC,IAAI;MACA,MAAMU,QAAQ,GAAG,MAAMT,KAAK,CAACU,GAAG,CAAC,6BAA6B,EAAE;QAC5DC,OAAO,EAAE;UAAEC,aAAa,EAAG,UAASL,SAAU;QAAE;MACpD,CAAC,CAAC;MACFD,UAAU,CAACG,QAAQ,CAACI,IAAI,CAAC;IAC7B,CAAC,CAAC,OAAOC,KAAK,EAAE;MACZC,OAAO,CAACD,KAAK,CAAC,wBAAwB,EAAEA,KAAK,CAAC;IAClD;EACJ,CAAC,EAAE,CAACP,SAAS,CAAC,CAAC,CAAC,CAAC;;EAEjBT,SAAS,CAAC,MAAM;IACZ,IAAIS,SAAS,EAAE;MACXC,YAAY,CAAC,CAAC;IAClB;EACJ,CAAC,EAAE,CAACD,SAAS,EAAEC,YAAY,CAAC,CAAC,CAAC,CAAC;;EAE/B,MAAMQ,QAAQ,GAAG,MAAAA,CAAOC,EAAE,EAAEC,IAAI,KAAK;IACjC,IAAI;MACA,MAAMlB,KAAK,CAACmB,IAAI,CAAC,6BAA6B,EAAE;QAAEC,UAAU,EAAEH,EAAE;QAAEC,IAAI,EAAEA;MAAK,CAAC,EAAE;QAC5EP,OAAO,EAAE;UAAEC,aAAa,EAAG,UAASL,SAAU;QAAE;MACpD,CAAC,CAAC;MACFC,YAAY,CAAC,CAAC;IAClB,CAAC,CAAC,OAAOM,KAAK,EAAE;MACZC,OAAO,CAACD,KAAK,CAAC,oBAAoB,EAAEA,KAAK,CAAC;IAC9C;EACJ,CAAC;EAED,MAAMO,WAAW,GAAG,MAAOC,OAAO,IAAK;IACnC,IAAI;MACA,MAAMtB,KAAK,CAACuB,MAAM,CAAE,iCAAgCD,OAAQ,EAAC,EAAE;QAC3DX,OAAO,EAAE;UAAEC,aAAa,EAAG,UAASL,SAAU;QAAE;MACpD,CAAC,CAAC;MACFC,YAAY,CAAC,CAAC;IAClB,CAAC,CAAC,OAAOM,KAAK,EAAE;MACZC,OAAO,CAACD,KAAK,CAAC,sBAAsB,EAAEA,KAAK,CAAC;IAChD;EACJ,CAAC;EAED,oBACIpB,KAAA,CAAA8B,aAAA,CAACtB,cAAc,CAACuB,QAAQ;IAACC,KAAK,EAAE;MAAErB,OAAO;MAAEW,QAAQ;MAAEK;IAAY,CAAE;IAAAM,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAC9D5B,QACoB,CAAC;AAElC,CAAC;AAED,OAAO,MAAM6B,UAAU,GAAGA,CAAA,KAAMrC,UAAU,CAACM,cAAc,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module"}